# timedeal-numble

## 1. 전체적인 시스템 구조도(아키텍쳐)  
![타임딜 drawio](https://user-images.githubusercontent.com/60431816/225598375-68fc9b2c-e963-4c0b-84f2-c2766f75e5e4.png)

## 2. API 목록  
https://documenter.getpostman.com/view/24793112/2s93Jxr1Nw

## 3. 와이어 프레임  
https://www.figma.com/file/aCwsHHK9mna4GGsYhySZMj/%ED%83%80%EC%9E%84%EB%94%9C-%EC%84%9C%EB%B2%84-%EA%B5%AC%EC%B6%95?node-id=0%3A1&t=i2gzl8wYdh0EvjKq-1

## 4. ERD
![numbleERD](https://user-images.githubusercontent.com/60431816/225566600-3dfac7dc-fb3e-45cd-aa63-e5fcd26aba82.jpg)

## 5. 기술적으로 고민한(고생한) 부분들
### 5-1. service에서의 반환타입은 도메인 객체를 넘겨주는게 좋을까 DTO로 전달해주는것이 좋을까?  
service 에서 반환타입을 도메인 객체로 넘겨주면 service내의 메서드가 다른 메서드를 호출하여 사용할때 더 편리할것이다.  
따라서 유저로그인을 처리할때까지만해도 service에서 도메인객체를 반환하는 방식으로 진행하였다.  
그런데 구글링을 하면서 여러 블로그에서 service계층에서 DTO로 바꿔 반환하는 코드를 보게되었다.  
컨트롤러(표현계층)에 도메인이 노출되는것때문에 그런것일까 생각했는데  
반환할 필요가 없는 데이터까지 표현계층에 넘어온다는 점도 있고,  
controller가 여러 도메인 객체의 정보를 조합해서 DTO를 생성해야하는경우  
service로직이 controller에 포함이 되면서 하나의 controller에 의존하는 service개수가 비대해진다는 점을 단점으로 볼수있다는 글을 보았다.  
따라서 service 계층에서 dto를 반환하도록 수정하였다.  
그런데 수정하고나니까 이렇게되면 또 너무 서로 종속적이게 되는건 아닐까 싶기도하고  
테코블 블로그에서는 반환타입같은 경우 보통 도메인객체를 내보내주고 컨트롤러에서 DTO로 변환하고있다는 이야기도 봐서 어떻게 처리하는게 적절한것일까 싶다.  


### 5-2. 유효성 검사는 어느단에서 하는것이 맞을까  
controller, service, domain 모든 단에서 유효성 검사를 진행하면 그만큼 중복처리가 반복될텐데 성능상으로는 크게 문제가 없을것인가?


### 5-3. 낙관적락 vs 비관적락  
낙관적락은 version등의 구분을 통해 충돌을 방지하고  
비관적락은 db에 직접 락을 거는 방식으로 충돌을 방지한다.  
성능상으로는 낙관적락을 사용하는 방식이 더 효율적이라는 생각이 들었으나  
버저닝과 에러처리의 이유로 간단하게 작업하기위해서 비관적락을 사용하였다.  
그리고 비관적락은 동시성을 강력하게 지킬수있기때문에 추후 결제하기같은 기능이 붙을경우 이점이 있을거라고 판단하였다.  

## 6. 성능측정 및 개선 내용  
성능측정은 진행하지않았으므로 추가적인 개선이 필요하다.  


## 7. 추가사항  
cicd 구현하여 서버배포 개선하기(현재 접속오류)  
서비스단 테스트코드 추가해야함  
유효성 검사 코드 추가 필요  
페이징 조회시 커서기반으로 조회할수있도록 수정하기  


~~8. 회고록 URL~~
